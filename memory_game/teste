import tkinter as tk
from tkinter import PhotoImage
import random

def play_game():
    # Limpa a janela
    for widget in janela.winfo_children():
        widget.destroy()

    # Cria os pares de números (8x8 = 64 posições → 32 pares)
    numeros = []
    for i in range(1, 33):
        numeros.append(i)
        numeros.append(i)
    random.shuffle(numeros)

    # Cria matriz 8x8
    matriz = []
    contador = 0
    for i in range(8):
        linha = []
        for j in range(8):
            linha.append(numeros[contador])
            contador += 1
        matriz.append(linha)

    # Variáveis de controle dentro de listas (para alterar dentro das funções)
    primeira_carta = [None]
    bloqueado = [False]

    botoes = []

    # Função que revela carta
    def revelar_carta(i, j, botoes, matriz, primeira_carta, bloqueado):
        if bloqueado[0]:
            return

        botao = botoes[i][j]
        valor = matriz[i][j]

        botao.config(text=str(valor), state="disabled", disabledforeground="black")

        if primeira_carta[0] is None:
            primeira_carta[0] = (i, j)
        else:
            i1, j1 = primeira_carta[0]
            valor1 = matriz[i1][j1]

            if valor == valor1:
                botoes[i1][j1].config(bg="lightgreen")
                botoes[i][j].config(bg="lightgreen")
            else:
                bloqueado[0] = True
                janela.after(1000, lambda: esconder_cartas(i1, j1, i, j, botoes, bloqueado))

            primeira_carta[0] = None

    # Função que esconde as cartas erradas
    def esconder_cartas(i1, j1, i2, j2, botoes, bloqueado):
        botoes[i1][j1].config(text="?", state="normal")
        botoes[i2][j2].config(text="?", state="normal")
        bloqueado[0] = False

    # Criação dos botões (as cartas)
    for i in range(8):
        linha_botoes = []
        for j in range(8):
            botao = tk.Button(
                janela, text="?", width=4, height=2,
                font=("Arial", 12, "bold"),
                command=lambda i=i, j=j: revelar_carta(i, j, botoes, matriz, primeira_carta, bloqueado)
            )
            botao.grid(row=i, column=j, padx=2, pady=2)
            linha_botoes.append(botao)
        botoes.append(linha_botoes)



cor_fundo = "#000000"
cor_letra = "#ffffff"
cor_fonte = ('Arial', 26, 'bold italic')
fonte_helvica = ("Helvetica", 16, "bold italic")

janela = tk.Tk()
janela.title("Memory Game")
janela.geometry("640x480+200+400")
janela.configure(bg="lightblue")
janela.minsize(640,480)

icon = PhotoImage(file="icone_da_janela.png")
janela.iconphoto(True, icon)

imagem_fundo = PhotoImage(file="imagem.png")
label_fundo = tk.Label(janela, image=imagem_fundo)
label_fundo.place(x=0, y=0, relwidth=1, relheight=1)

title_label = tk.Label(janela, text="Memory Game", font=cor_fonte,
                        fg=cor_letra, bg=cor_fundo)
title_label.place(relx=0.5, rely=0.2, anchor="center")

botao_play = tk.Button(janela, text="Play", command=play_game,
                       bg='green', fg='white', padx=40,
                       font=fonte_helvica)
botao_play.place(relx=0.5, rely=0.5, anchor="center")

botao_quit = tk.Button(janela, text="Quit", command=janela.quit,
                       bg='red', fg='white', padx=40,
                       font=fonte_helvica)
botao_quit.place(relx=0.5, rely=0.65, anchor="center")

janela.mainloop()
